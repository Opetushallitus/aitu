{{=[[ ]]=}}
[[#i18n.yleiset]]
[[#i18n.enum]]
[[#i18n.sivutus]]
[[#i18n.arviointipaatokset]]
<div>
  <h3 ng-click="haeSuorituksia = !haeSuorituksia">[[hae_suorituksia]]</h3>

  <div ng-show="haeSuorituksia" style="border: 1px solid black; padding: 1em">

    <div>
      <fieldset>
        <label>[[hae_tutkinnon_suorittaja_placeholder]]</label>
        <input type="text" placeholder="[[hae_tutkinnon_suorittaja_placeholder]]" ng-model="hakuForm.suorittaja"></input>
      </fieldset>
      <fieldset>
       <label>[[sukupuoli]]</label>
        <select ng-model="hakuForm.sukupuoli">
          <option ng-value="null"></option>        
          <option value="N">[[sukupuoli_nainen]]</option>
          <option value="M">[[sukupuoli_mies]]</option>
        </select>
       </fieldset>
    </div>
    <div>
      <fieldset>
       <label>[[toimikunta]]</label>
       <select ng-options="toimikunta.tkunta as toimikunta.diaarinumero + ' ' + (toimikunta | lokalisoiKentta:'nimi') for toimikunta in tutkintotoimikunnat" ng-model="hakuForm.toimikunta" required>
         <option value=""></option>
       </select>
      </fieldset>
      <fieldset>
        <label>[[tutkinto_jarjestaja]]</label>
        <select ng-model="hakuForm.koulutustoimija" ng-options="koulutustoimija.ytunnus as (koulutustoimija | lokalisoiKentta:'nimi') for koulutustoimija in koulutustoimijat">
          <option value=""></option>
        </select>
      </fieldset>      
    </div>
    <div>
      <fieldset>
        <label>[[suoritus_tuotu]]</label>
        <div>
          <pvm-valitsin pakollinen="false" valittu-pvm="hakuForm.luotupvm_alku" max-pvm="hakuForm.luotupvm_loppu" tyhjennettava="true"></pvm-valitsin>
          &nbsp;&nbsp;&nbsp;&nbsp;-
          <pvm-valitsin pakollinen="false" valittu-pvm="hakuForm.luotupvm_loppu" min-pvm="hakuForm.luotupvm_alku" tyhjennettava="true"></pvm-valitsin>
        </div>
      </fieldset>
      <fieldset>
        <label>[[suoritus_kirjattu]]</label>
        <div>
          <pvm-valitsin pakollinen="false" valittu-pvm="hakuForm.hyvaksymispvm_alku" max-pvm="hakuForm.hyvaksymispvm_loppu" tyhjennettava="true"></pvm-valitsin>
          &nbsp;&nbsp;&nbsp;&nbsp;-
          <pvm-valitsin pakollinen="false" valittu-pvm="hakuForm.hyvaksymispvm_loppu" min-pvm="hakuForm.hyvaksymispvm_alku" tyhjennettava="true"></pvm-valitsin>
        </div>
      </fieldset>
    </div>
    <div>
      <fieldset>
        <label>[[tutkinto]]</label>
        <select ng-model="hakuForm.tutkinto" ng-options="tutkinto.tutkintotunnus as tutkinto.tutkintotunnus + ' ' + (tutkinto | lokalisoiKentta:'nimi') for tutkinto in tutkinnot">
          <option value=""></option>
        </select>
      </fieldset>
      <fieldset>
        <label>[[tutkinnon_osa]]</label>
        <select ng-options="tutkinnonosa.tutkinnonosa_id as tutkinnonosa.osatunnus + ' ' + (tutkinnonosa | lokalisoiKentta:'nimi') for tutkinnonosa in tutkinnonosat track by tutkinnonosa.tutkinnonosa_id" ng-model="hakuForm.tutkinnonosa" required>
          <option value=""></option>
        </select>
      </fieldset>
      <fieldset>
        <label>[[osaamisala]]</label>
        <select ng-options="osaamisala.osaamisala_id as osaamisala.osaamisalatunnus + ' ' + (osaamisala | lokalisoiKentta:'nimi') for osaamisala in osaamisalat track by osaamisala.osaamisala_id" ng-model="hakuForm.osaamisala">
          <option value=""></option>
        </select>
      </fieldset>
    </div>
    <div>
      <fieldset>
        <label>[[tutkinnon_osan_todistus]]</label>
        <select ng-model="hakuForm.todistus">
          <option ng-value="null"></option>
          <option value="todistus_ei">[[tutkinnon_osan_todistus_ei]]</option>
          <option value="todistus_kylla">[[tutkinnon_osan_todistus_kylla]]</option>
          <option value="todistus_kokotutkinto">[[tutkinnon_osan_todistus_kokotutkinto]]</option>
        </select>
      </fieldset>
      <fieldset>
        <label>[[suorituskieli]]</label>
        [[#i18n.enum.kieli-arvo]]
        <select ng-model="hakuForm.kieli">
          <option ng-value="null"></option>        
          <option value="fi">[[fi]]</option>
          <option value="sv">[[sv]]</option>
        </select>
        [[/i18n.enum.kieli-arvo]]
      </fieldset>      
    </div>
    <div>
      <fieldset>
        <label>[[rahoitusmuoto]]</label>
        <select ng-model="hakuForm.rahoitusmuoto">
          <option value=""></option>
          <option value="1">[[rahoitusmuoto-arvo.valtionosuus]]</option> <!-- valtionosuus -->
          <option value="2">[[rahoitusmuoto-arvo.oppisopimus]]</option> <!-- oppisopimus -->
          <option value="3">[[rahoitusmuoto-arvo.tyovoimapoliittinen]]</option> <!-- tyovoimapoliittinen -->
          <option value="4">[[rahoitusmuoto-arvo.henkilostokoulutus]]</option> <!--  henkilostokoulutus -->
          <option value="5">[[rahoitusmuoto-arvo.eirahoitusmuotoa]]</option> <!-- eirahoitusmuotoa -->
          <option value="6">[[rahoitusmuoto-arvo.opsmapa]]</option> <!-- opsmapa -->
        </select>
      </fieldset>
      <fieldset>
        <label>[[jarjestamismuoto]]</label>
        <select ng-model="hakuForm.jarjestamismuoto">
          <option ng-value="null"></option>
          <option value="oppilaitosmuotoinen">[[oppilaitosmuotoinen]]</option>
          <option value="oppisopimuskoulutus">[[oppisopimuskoulutus]]</option>
          <option value="ei_valmistavaa_koulutusta">[[ei_valmistavaa_koulutusta]]</option>
        </select>
      </fieldset>
    </div>

  </div>

  <div>
    [[nayta]]:

    <label>
      <input type="radio" ng-model="hakuForm.tila" ng-value="null">
      [[kaikki]]
    </label>
    <label>
      <input type="radio" ng-model="hakuForm.tila" value="luonnos">
      [[luonnokset]]
    </label>
    <label>
      <input type="radio" ng-model="hakuForm.tila" value="hyvaksytty">
      [[hyvaksytyt]]
    </label>
  </div>
  <div>
    <label>[[tuloksia]]</label>
      <fieldset>
        <select ng-model="hakuForm.tuloksiasivulla">
          <option value="10">10</option>
          <option value="25">25</option>
          <option value="50">50</option>
          <option value="100">100</option>
        </select>   
     </fieldset>
  </div>
  <form name="suorituksetForm">
  <hakutulokset tuloksia-sivulla="+hakuForm.tuloksiasivulla"
    haku-tila="hakuForm.tila" tulosform="form"
    otsikot="['[[sukunimi]], [[etunimi]], [[syntymapvm]]', '[[tutkinto]]', '[[tutkinnon_osa]]', '[[osaamisala]]', '[[arvosana]]', '[[arviointikokouksen_pvm]]', '[[kirjauspaiva]]','[[tutkinto_jarjestaja]]', '[[tila]]']" 
    hakutulokset="suoritukset"
    poistofn="poistaSuoritus"
    muokkausfn="muokkaaSuoritusta"
    >
      <div class="table-cell">{{ hakutulos.suorittaja_sukunimi }}, {{ hakutulos.suorittaja_etunimi }}, {{ hakutulos.suorittaja_syntymapvm | date:'dd.MM.yyyy' }}</div>
      <div class="table-cell">{{ hakutulos | lokalisoiKentta:'tutkinto_nimi' }}</div>
      <div class="table-cell">{{ hakutulos | lokalisoiKentta:'tutkinnonosa_nimi' }}</div>
      <div class="table-cell">{{ hakutulos | lokalisoiKentta:'osaamisala_nimi' }}</div>
      <div class="table-cell">{{ hakutulos.arvosana }}</div>
      <div class="table-cell">{{ hakutulos.arviointikokouksen_pvm | date:'dd.MM.yyyy' }}</div>
      <div class="table-cell">{{ hakutulos.hyvaksymisaika | date:'dd.MM.yyyy' }}</div>
      <div class="table-cell">{{ hakutulos | lokalisoiKentta:'koulutustoimija_nimi' }}</div>
      <div class="table-cell">{{ i18n.arviointipaatokset['tila-' + hakutulos.tila] }}</div>
      <div class="table-cell"><input type="checkbox" ng-model="tulosform[hakutulos.suorituskerta_id]" ng-if="hakuTila === 'luonnos' || hakuTila === 'ehdotettu' || hakuTila === 'hyvaksytty'"></div>
      <div class="table-cell">
        <button class="icon edit-icon" ng-click="muokkausfn(hakutulos)" ng-if="hakuTila === 'luonnos'"></button>
        &nbsp;&nbsp;&nbsp;
        <button class="icon delete-icon" ng-click="poistofn(hakutulos)" ng-if="hakuTila === 'luonnos'"></button>
      </div>
   </hakutulokset>
    <button class="float-right" ng-click="palautaLuonnokseksi()" ng-disabled="valitutSuoritukset().length == 0" ng-if="hakuForm.tila === 'hyvaksytty'">[[palauta_luonnokseksi]]</button>
    <span class="float-right" ng-show="hakuForm.tila === 'luonnos'">
      <label> [[hyvaksymispvm]]</label>
      <pvm-valitsin pakollinen="false" valittu-pvm="form.hyvaksymispvm" tyhjennettava="true"></pvm-valitsin>
      <button class="float-right" ng-click="hyvaksy()" ng-disabled="valitutSuoritukset().length == 0" ng-if="hakuForm.tila === 'luonnos'">[[hyvaksy]]</button>
    </span>
  </form>
</div>
[[/i18n.arviointipaatokset]]
[[/i18n.sivutus]]
[[/i18n.enum]]
[[/i18n.yleiset]]